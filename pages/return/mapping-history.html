<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mapping History - Return TM Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.6/dist/umd/supabase.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.4.0/exceljs.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Inter', sans-serif;
    }
    
    .status-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 0.375rem;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .status-mapped {
      background-color: #DBEAFE;
      color: #1E40AF;
    }
    
    .status-unmapped {
      background-color: #FEF3C7;
      color: #92400E;
    }
    
    .status-shipped {
      background-color: #D1FAE5;
      color: #065F46;
    }
  </style>
</head>
<body class="bg-gray-50">
  <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-2">Mapping History</h2>
      <p class="text-gray-600">Return TM Management - ë§µí•‘ ì´ë ¥ ì¡°íšŒ (í†µí•©)</p>
    </div>

    <!-- Search Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">ê²€ìƒ‰ ì¡°ê±´</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Pallet No -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Pallet No</label>
          <input 
            type="text" 
            id="filterPalletNo" 
            class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="íŒ”ë › ë²ˆí˜¸ (ì˜ˆ: VWRT0001)"
            onkeypress="if(event.key === 'Enter') searchHistory()"
          />
        </div>
        
        <!-- TM No -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">TM No</label>
          <input 
            type="text" 
            id="filterTMNo" 
            class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="TM ë²ˆí˜¸"
            onkeypress="if(event.key === 'Enter') searchHistory()"
          />
        </div>
        
        <!-- Mapping Date -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Mapping Date</label>
          <input 
            type="date" 
            id="filterMappingDate" 
            class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="flex justify-end gap-3 mt-4">
        <button 
          onclick="clearSearch()" 
          class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors"
        >
          ì´ˆê¸°í™”
        </button>
        <button 
          onclick="searchHistory()" 
          class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors"
        >
          ê²€ìƒ‰
        </button>
        <button 
          onclick="exportToExcel()" 
          class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors"
        >
          Excel ë‹¤ìš´ë¡œë“œ
        </button>
      </div>
    </div>

    <!-- Results Section -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div id="loadingIndicator" class="hidden text-center py-8">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
        <p class="mt-2 text-gray-600">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>
      
      <div id="emptyState" class="text-center py-12">
        <div class="text-6xl mb-4">ğŸ“œ</div>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">ê²€ìƒ‰ ì¡°ê±´ì„ ì…ë ¥í•˜ì„¸ìš”</h3>
        <p class="text-gray-600">íŒ”ë › ë²ˆí˜¸, TM ë²ˆí˜¸, ë˜ëŠ” ë§µí•‘ ë‚ ì§œë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë§µí•‘ ì´ë ¥ì„ ì¡°íšŒí•˜ì„¸ìš”.</p>
      </div>
      
      <div id="historyResults" class="hidden">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">ë§µí•‘ ì´ë ¥</h3>
          <div class="text-sm text-gray-600">
            ì´ <span id="resultCount" class="font-bold text-blue-600">0</span> ê±´
          </div>
        </div>
        
        <!-- Status Message -->
        <div id="statusMessage" class="hidden mb-4 p-3 rounded-lg"></div>
        
        <!-- History Table -->
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pallet No</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TM No</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mapping Date</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Unmapping Date</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Shipping Date</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Batch</th>
              </tr>
            </thead>
            <tbody id="historyTableBody" class="bg-white divide-y divide-gray-200">
              <!-- Data will be inserted here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Supabase ì„¤ì •
    const SUPABASE_URL = 'https://wfnihtmmaebgjtdmazmo.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndmbmlodG1tYWViZ2p0ZG1hem1vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3NTY3NTcsImV4cCI6MjA2NTMzMjc1N30.FYfdgSvOT1qUvANGlqXCEGvSR2JujggU7T_Sjzys3HQ';
    
    let supabaseClient = null;
    
    // Supabase ì´ˆê¸°í™”
    async function initSupabase() {
      try {
        if (typeof supabase !== 'undefined') {
          supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
          console.log('âœ… Supabase initialized');
        } else {
          console.error('Supabase library not loaded');
        }
      } catch (error) {
        console.error('Error initializing Supabase:', error);
      }
    }
    
    // ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
    function showStatus(message, type = 'info') {
      const statusDiv = document.getElementById('statusMessage');
      if (!statusDiv) return;
      
      statusDiv.classList.remove('hidden');
      statusDiv.className = `mb-4 p-3 rounded-lg ${
        type === 'success' ? 'bg-green-100 text-green-800' :
        type === 'error' ? 'bg-red-100 text-red-800' :
        'bg-blue-100 text-blue-800'
      }`;
      statusDiv.textContent = message;
      
      if (type === 'success' || type === 'error') {
        setTimeout(() => {
          statusDiv.classList.add('hidden');
        }, 5000);
      }
    }
    
    function hideStatus() {
      const statusDiv = document.getElementById('statusMessage');
      if (statusDiv) {
        statusDiv.classList.add('hidden');
      }
    }
    
    // ì´ë ¥ ê²€ìƒ‰
    async function searchHistory() {
      const palletNo = document.getElementById('filterPalletNo').value.trim();
      const tmNo = document.getElementById('filterTMNo').value.trim();
      const mappingDate = document.getElementById('filterMappingDate').value;
      
      // ê²€ìƒ‰ ì¡°ê±´ì´ ì—†ìœ¼ë©´ ì „ì²´ ë°ì´í„° ì¡°íšŒ
      
      try {
        showLoading(true);
        hideStatus();
        
        if (!supabaseClient) {
          await initSupabase();
        }
        
        // 1. í˜„ì¬ ë§µí•‘ ë°ì´í„° ì¡°íšŒ (vwtm_mapping)
        let currentQuery = supabaseClient
          .from('vwtm_mapping')
          .select('*');
        
        if (palletNo) {
          currentQuery = currentQuery.eq('pallet_no', palletNo);
        }
        if (tmNo) {
          currentQuery = currentQuery.eq('tm_no', tmNo);
        }
        if (mappingDate) {
          const startDate = new Date(mappingDate);
          startDate.setHours(0, 0, 0, 0);
          const endDate = new Date(mappingDate);
          endDate.setHours(23, 59, 59, 999);
          currentQuery = currentQuery
            .gte('mapping_date', startDate.toISOString())
            .lte('mapping_date', endDate.toISOString());
        }
        
        const { data: currentMappings, error: currentError } = await currentQuery
          .order('mapping_date', { ascending: true });
        
        if (currentError) {
          throw currentError;
        }
        
        // 2. íˆìŠ¤í† ë¦¬ ë°ì´í„° ì¡°íšŒ (vwtm_mapping_history)
        let historyQuery = supabaseClient
          .from('vwtm_mapping_history')
          .select('*');
        
        if (palletNo) {
          historyQuery = historyQuery.eq('pallet_no', palletNo);
        }
        if (tmNo) {
          historyQuery = historyQuery.eq('tm_no', tmNo);
        }
        if (mappingDate) {
          const startDate = new Date(mappingDate);
          startDate.setHours(0, 0, 0, 0);
          const endDate = new Date(mappingDate);
          endDate.setHours(23, 59, 59, 999);
          historyQuery = historyQuery
            .gte('mapping_date', startDate.toISOString())
            .lte('mapping_date', endDate.toISOString());
        }
        
        const { data: historyMappings, error: historyError } = await historyQuery
          .order('mapping_date', { ascending: true });
        
        if (historyError) {
          throw historyError;
        }
        
        // 3. ë°ì´í„° í†µí•© ë° ì •ë ¬
        const allMappings = [];
        
        // í˜„ì¬ ë§µí•‘ ë°ì´í„° ì¶”ê°€ (ìƒíƒœ: mapped ë˜ëŠ” shipped)
        if (currentMappings) {
          currentMappings.forEach(item => {
            allMappings.push({
              ...item,
              status: item.shipping_date ? 'shipped' : 'mapped',
              source: 'current'
            });
          });
        }
        
        // íˆìŠ¤í† ë¦¬ ë°ì´í„° ì¶”ê°€ (ìƒíƒœ: unmapped)
        if (historyMappings) {
          historyMappings.forEach(item => {
            allMappings.push({
              ...item,
              status: 'unmapped',
              source: 'history'
            });
          });
        }
        
        // ë‚ ì§œìˆœ ì •ë ¬ (mapping_date ê¸°ì¤€)
        allMappings.sort((a, b) => {
          const dateA = new Date(a.mapping_date || 0);
          const dateB = new Date(b.mapping_date || 0);
          return dateA - dateB;
        });
        
        displayHistory(allMappings);
        
        if (allMappings.length === 0) {
          const hasFilter = palletNo || tmNo || mappingDate;
          if (hasFilter) {
            let searchConditions = [];
            if (palletNo) searchConditions.push(`íŒ”ë ›: ${palletNo}`);
            if (tmNo) searchConditions.push(`TM: ${tmNo}`);
            if (mappingDate) searchConditions.push(`ë§µí•‘ì¼: ${mappingDate}`);
            showStatus(`ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ë§µí•‘ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤. (${searchConditions.join(', ')})`, 'info');
          } else {
            showStatus('ë§µí•‘ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.', 'info');
          }
        } else {
          const hasFilter = palletNo || tmNo || mappingDate;
          if (hasFilter) {
            showStatus(`ì´ ${allMappings.length}ê±´ì˜ ì´ë ¥ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`, 'success');
          } else {
            showStatus(`ì „ì²´ ${allMappings.length}ê±´ì˜ ì´ë ¥ì„ ì¡°íšŒí–ˆìŠµë‹ˆë‹¤.`, 'success');
          }
        }
        
      } catch (error) {
        console.error('Error searching history:', error);
        showStatus('ì´ë ¥ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
        displayHistory([]);
      } finally {
        showLoading(false);
      }
    }
    
    // í˜„ì¬ ì¡°íšŒëœ ë°ì´í„° ì €ì¥ (ì—‘ì…€ ë‹¤ìš´ë¡œë“œìš©)
    let currentHistoryData = [];
    
    // ì´ë ¥ í‘œì‹œ
    function displayHistory(data) {
      // í˜„ì¬ ë°ì´í„° ì €ì¥ (ì—‘ì…€ ë‹¤ìš´ë¡œë“œìš©)
      currentHistoryData = data || [];
      
      const emptyState = document.getElementById('emptyState');
      const historyResults = document.getElementById('historyResults');
      const tableBody = document.getElementById('historyTableBody');
      const resultCount = document.getElementById('resultCount');
      
      if (!data || data.length === 0) {
        emptyState.classList.remove('hidden');
        historyResults.classList.add('hidden');
        if (resultCount) resultCount.textContent = '0';
        return;
      }
      
      emptyState.classList.add('hidden');
      historyResults.classList.remove('hidden');
      if (resultCount) resultCount.textContent = data.length;
      
      if (!tableBody) return;
      
      tableBody.innerHTML = data.map(item => {
        const status = item.status;
        const statusText = status === 'mapped' ? 'Mapped' : 
                          status === 'unmapped' ? 'Unmapped' : 
                          'Shipped';
        const statusClass = status === 'mapped' ? 'status-mapped' : 
                           status === 'unmapped' ? 'status-unmapped' : 
                           'status-shipped';
        
        const mappingDate = item.mapping_date 
          ? new Date(item.mapping_date).toLocaleString('ko-KR', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit'
            })
          : '-';
        
        const unmappingDate = item.unmapping_date 
          ? new Date(item.unmapping_date).toLocaleString('ko-KR', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit'
            })
          : '-';
        
        const shippingDate = item.shipping_date 
          ? new Date(item.shipping_date).toLocaleString('ko-KR', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit'
            })
          : '-';
        
        const batch = item.shipping_batch ? `${item.shipping_batch}ì°¨` : '-';
        
        return `
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-3 whitespace-nowrap">
              <span class="status-badge ${statusClass}">${statusText}</span>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900">${item.pallet_no || '-'}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700">${item.tm_no || '-'}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700">${mappingDate}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700">${unmappingDate}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700">${shippingDate}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-700">${batch}</td>
          </tr>
        `;
      }).join('');
    }
    
    // ë¡œë”© í‘œì‹œ
    function showLoading(show) {
      const loadingIndicator = document.getElementById('loadingIndicator');
      if (loadingIndicator) {
        if (show) {
          loadingIndicator.classList.remove('hidden');
        } else {
          loadingIndicator.classList.add('hidden');
        }
      }
    }
    
    // ê²€ìƒ‰ ì´ˆê¸°í™”
    function clearSearch() {
      document.getElementById('filterPalletNo').value = '';
      document.getElementById('filterTMNo').value = '';
      document.getElementById('filterMappingDate').value = '';
      document.getElementById('emptyState').classList.remove('hidden');
      document.getElementById('historyResults').classList.add('hidden');
      currentHistoryData = [];
      hideStatus();
    }
    
    // Excel ë‹¤ìš´ë¡œë“œ
    async function exportToExcel() {
      try {
        // í•„í„°ê°€ ì—†ìœ¼ë©´ ì „ì²´ ë°ì´í„° ì¡°íšŒ
        const palletNo = document.getElementById('filterPalletNo').value.trim();
        const tmNo = document.getElementById('filterTMNo').value.trim();
        const mappingDate = document.getElementById('filterMappingDate').value;
        
        const hasFilter = palletNo || tmNo || mappingDate;
        
        let dataToExport = currentHistoryData;
        
        // í•„í„°ê°€ ì—†ìœ¼ë©´ ì „ì²´ ë°ì´í„° ì¡°íšŒ
        if (!hasFilter || !dataToExport || dataToExport.length === 0) {
          showStatus('ì „ì²´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...', 'info');
          
          if (!supabaseClient) {
            await initSupabase();
          }
          
          // 1. í˜„ì¬ ë§µí•‘ ë°ì´í„° ì „ì²´ ì¡°íšŒ
          const { data: currentMappings, error: currentError } = await supabaseClient
            .from('vwtm_mapping')
            .select('*')
            .order('mapping_date', { ascending: true });
          
          if (currentError) {
            throw currentError;
          }
          
          // 2. íˆìŠ¤í† ë¦¬ ë°ì´í„° ì „ì²´ ì¡°íšŒ
          const { data: historyMappings, error: historyError } = await supabaseClient
            .from('vwtm_mapping_history')
            .select('*')
            .order('mapping_date', { ascending: true });
          
          if (historyError) {
            throw historyError;
          }
          
          // 3. ë°ì´í„° í†µí•© ë° ì •ë ¬
          const allMappings = [];
          
          // í˜„ì¬ ë§µí•‘ ë°ì´í„° ì¶”ê°€
          if (currentMappings) {
            currentMappings.forEach(item => {
              allMappings.push({
                ...item,
                status: item.shipping_date ? 'shipped' : 'mapped',
                source: 'current'
              });
            });
          }
          
          // íˆìŠ¤í† ë¦¬ ë°ì´í„° ì¶”ê°€
          if (historyMappings) {
            historyMappings.forEach(item => {
              allMappings.push({
                ...item,
                status: 'unmapped',
                source: 'history'
              });
            });
          }
          
          // ë‚ ì§œìˆœ ì •ë ¬
          allMappings.sort((a, b) => {
            const dateA = new Date(a.mapping_date || 0);
            const dateB = new Date(b.mapping_date || 0);
            return dateA - dateB;
          });
          
          dataToExport = allMappings;
        }
        
        if (!dataToExport || dataToExport.length === 0) {
          showStatus('ë‹¤ìš´ë¡œë“œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'error');
          return;
        }
        
        showStatus('Excel íŒŒì¼ ìƒì„± ì¤‘...', 'info');
        
        const workbook = new ExcelJS.Workbook();
        const worksheet = workbook.addWorksheet('Mapping History');
        
        // í—¤ë” ì¶”ê°€
        const headers = ['Status', 'Pallet No', 'TM No', 'Mapping Date', 'Unmapping Date', 'Shipping Date', 'Batch'];
        const headerRow = worksheet.addRow(headers);
        headerRow.font = { bold: true };
        headerRow.fill = {
          type: 'pattern',
          pattern: 'solid',
          fgColor: { argb: 'FFE0E0E0' }
        };
        headerRow.alignment = { horizontal: 'center', vertical: 'middle' };
        
        // ë°ì´í„° ì¶”ê°€
        dataToExport.forEach(item => {
          const status = item.status === 'mapped' ? 'Mapped' : 
                        item.status === 'unmapped' ? 'Unmapped' : 
                        'Shipped';
          
          const mappingDate = item.mapping_date 
            ? new Date(item.mapping_date).toISOString().slice(0, 19).replace('T', ' ')
            : '-';
          
          const unmappingDate = item.unmapping_date 
            ? new Date(item.unmapping_date).toISOString().slice(0, 19).replace('T', ' ')
            : '-';
          
          const shippingDate = item.shipping_date 
            ? new Date(item.shipping_date).toISOString().slice(0, 19).replace('T', ' ')
            : '-';
          
          const batch = item.shipping_batch ? `${item.shipping_batch}ì°¨` : '-';
          
          worksheet.addRow([
            status,
            item.pallet_no || '-',
            item.tm_no || '-',
            mappingDate,
            unmappingDate,
            shippingDate,
            batch
          ]);
        });
        
        // ì»¬ëŸ¼ ë„ˆë¹„ ì¡°ì •
        worksheet.columns[0].width = 12; // Status
        worksheet.columns[1].width = 15; // Pallet No
        worksheet.columns[2].width = 15; // TM No
        worksheet.columns[3].width = 20; // Mapping Date
        worksheet.columns[4].width = 20; // Unmapping Date
        worksheet.columns[5].width = 20; // Shipping Date
        worksheet.columns[6].width = 10; // Batch
        
        // ìë™ í•„í„° ì„¤ì •
        const headerRowNumber = worksheet.getRow(1).number;
        const lastRowNumber = worksheet.rowCount;
        worksheet.autoFilter = {
          from: { row: headerRowNumber, column: 1 },
          to: { row: lastRowNumber, column: 7 }
        };
        
        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        const buffer = await workbook.xlsx.writeBuffer();
        const blob = new Blob([buffer], { 
          type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' 
        });
        
        const url = window.URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        const dateStr = new Date().toISOString().slice(0, 10).replace(/-/g, '');
        link.download = `Mapping_History_${dateStr}.xlsx`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        window.URL.revokeObjectURL(url);
        
        showStatus('Excel ë‹¤ìš´ë¡œë“œ ì™„ë£Œ', 'success');
        
      } catch (error) {
        console.error('Error exporting to Excel:', error);
        showStatus('Excel ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
      }
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ Supabase ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      initSupabase();
    });
  </script>
</body>
</html>
